$schema: "http://dcc.icgc-argo.org/draft-00/schema#"

$id: "exposure"
title: Exposure
version: 0
category: clinical
type: object
description: ""
additionalProperties: false

systemProperties:
  properties:
    id:  # primary key, defined in 'primaryKey'
      $ref: _definitions#/common/properties/uuid

required:
- type
- donor_submitter_id
- program

primaryKey:
  surrogateKey: [ id ]
  naturalKey: [ program, donor_submitter_id ]  # one donor can have only one exposure record (one-to-one)

uniqueKeys: []

references:
- selfKey: [ program, donor_submitter_id ]
  reference:
    targetEntity: donor
    targetKey: [ program, submitter_id ]

properties:
  type:
    const: "exposure"
  program:
    $ref: _definitions#/common/properties/program_short_name
  donor_submitter_id:
    $ref: _definitions#/common/properties/submitter_id
  tobacco_smoking_history_indicator:
    enum:
    - Lifelong non-smoker (<100 cigarettes smoked in lifetime)
    - Current smoker (includes daily smokers non-daily/occasional smokers)
    - Current reformed smoker for > 15 years
    - Current reformed smoker for <= 15 years
    - Current reformed smoker, duration not specified
    - Smoking history not documented
  tobacco_smoking_intensity:
    type: integer
  alcohol_history:
    type: string
    scriptValidations:
    - "$cv(yes_no_unknown)"
  alcohol_history_intensity:
    enum:
    - None
    - Social Drinker (> once a month, < once a week)
    - Weekly Drinker (>=1x a week)
    - Daily Drinker
    - Occassional Drinker (< once a month)
    - Not Documented
