$schema: "http://json-schema.org/draft-07/schema#"

$id: read_group_ubam
version: 5

type: object
required:
- submitter_read_group_id
- read_group
- workflow
- experiment
properties:
  submitter_read_group_id:
    $ref: _defs#/read_group/submitter_read_group_id

  workflow:
    propertyNames:
      enum: [ name, short_name, version, run_id, inputs ]
    required: [ name, version, run_id, inputs ]
    allOf:
    - $ref: _defs#/workflow
    - properties:
        name:
          const: dna-seq-alignment
        inputs:
          type: array
          maxItems: 1
          items:
            type: object
            properties:
              analysis_type:
                const: sequencing_experiment

  experiment:
    propertyNames:
      enum: [ platform, platform_model, sequencing_date, library_strategy, sequencing_center,
              sequencing_experiment_id, submitter_sequencing_experiment_id ]
    required: [ platform, library_strategy,
                sequencing_experiment_id, submitter_sequencing_experiment_id ]
    $ref: _defs#/experiment

  read_group:
    propertyNames:
      enum: [ library_name, platform_unit, is_paired_end, read_length_r1, file_r1, insert_size,
              read_length_r2, file_r2, sample_barcode ]
    required: [ library_name, platform_unit, is_paired_end, read_length_r1, file_r1, insert_size,
                read_length_r2, file_r2, sample_barcode ]
    $ref: _defs#/read_group
