$schema: "http://dcc.icgc-argo.org/draft-00/schema#"

$id: "donor"
title: Donor
version: 0
category: clinical
type: object
description: "Cancer patient participated research"
additionalProperties: false

systemProperties:  # properties to be managed by the system, must not be included in submission
- id

required:
- type
- submitter_id
- program
- gender
- vital_status

uniqueKeys:
- [ id ]
- [ program, submitter_id ]  # donor submitter id must be unique within a program

properties:
  type:
    enum: [ "donor" ]
  id:
    $ref: _definitions#/common/properties/id
  submitter_id:
    $ref: _definitions#/common/properties/submitter_id
    description: "Submitter's donor ID"
  program:
    type: string
    scriptValidations:
      - "$cv(program_short_name)"
  vital_status:
    enum: [ "deceaded", "alive", "unknown" ]
  gender:
    enum: [ "female", "male", "other" ]
    description: "Donor biological sex"
  ethnicity:
    type: [ "string", "null" ]
    scriptValidations:
    - "$cv(ethnicity)"
  cause_of_death:
    enum: [ "died of cancer", "died of other reasons", null ]  # null means not applicable, eg, donor not deceaded yet
  survival_time:
    type: integer
    minimum: 0
    description: "How long has the donor survived since primary diagnosis, in days."
  prior_malignancy:
    type: string
    scriptValidations:
    - "$cv(yes_no_unknown)"
  cancer_type_prior_malignancy:
    type: [ "string", "null" ]
    scriptValidations:
    - "$cv(cancer_type_icd_10_code)"
    description: "ICD-10 diagnostic code for type of cancer in a prior malignancy."
