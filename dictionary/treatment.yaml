$schema: "http://dcc.icgc-argo.org/draft-00/schema#"

$id: "treament"
title: Treatment
version: 0
category: clinical
type: object
description: ""
additionalProperties: false

systemProperties:
- id

required:
- type
- submitter_id
- donor_submitter_id
- program
- treatment_type

uniqueKeys:
- [ id ]
- [ program, submitter_id ]

references:
- selfKey: [ program, donor_submitter_id ]
  reference:
    targetEntity: donor  # treatment to donor relationship is many-to-one
    targetKey: [ program, submitter_id ]

properties:
  type:
    const: "treament"
  id:
    $ref: _definitions#/common/properties/id
  program:
    $ref: _definitions#/common/properties/program_short_name
  submitter_id:
    $ref: _definitions#/common/properties/submitter_id
    description: "Submitter's treatment ID"
  donor_submitter_id:
    $ref: _definitions#/common/properties/submitter_id
  treatment_type:
    type: string
    scriptValidations:
    - $cv(treatment_type)
  is_primary_treatment:
    type: [ "boolean", "null" ]  # boolean type, nullable
  treatment_start_interval:
    type: integer
  treatment_duration:
    type: integer
  therapeutic_intent:
    enum: [ adjuvant, curative, palliative ]
  response_to_therapy:
    enum:
    - complete response
    - partial response
    - disease progression
    - stable disease
    - unknown
  adverse_events:
    type: string
