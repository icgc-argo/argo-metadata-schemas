$schema: "http://json-schema.org/draft-07/schema#"

$id: "dna_alignment_qc.bait_bias_detail_metrics.data_object"
type: object

propertyNames:
  enum: [ type, name, local_path, size, checksum, checksum_type ]
required: [ type, name, local_path, size, checksum, checksum_type ]

allOf:
- $ref: _definitions#/submitted_file
- properties:
    type:
      const: 'dna_alignment_qc.bait_bias_detail_metrics.data_object'
    name:
      pattern: '\.txt\.gz$'  # must have .txt.gz extension

definitions:
  relationDef:
    $ref: '_definitions#/relationDef'
    const:
      primaryKey:
      - '#/definitions/systemProperties/allOf/1/properties/id'

  systemProperties:
    propertyNames:
      enum: [ id, program, donor, repository, created_at, updated_at, library_strategy, bundle_id, bundle_type, format, data_type ]
    required: [ id, program, donor, repository, created_at, updated_at, library_strategy, bundle_id, bundle_type, format, data_type ]
    allOf:
    - $ref: _definitions#/data_object
    - properties:
        id:  # surrogate key
          $ref: '_definitions#/data_object/properties/id'
        program:  # copied from containing parent
          $ref: "dna_alignment_qc#/properties/program"
        donor:  # copied from containing parent
          $ref: "dna_alignment_qc#/definitions/systemProperties/properties/donor"
        library_strategy:  # copied from containing parent
          $ref: "dna_alignment_qc#/definitions/systemProperties/properties/library_strategy"
        bundle_id:  # copied from containing parent
          $ref: "dna_alignment_qc#/definitions/systemProperties/properties/id"
        bundle_type:
          const: "dna_alignment_qc"
        format:
          const: "TXT"
          default: "TXT"
        date_type:
          const: "Alignment QC"
          default: "Alignment QC"
